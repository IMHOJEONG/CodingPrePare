- EL(Expression Language)
  - JSP에서 표현식을 이용해 값 출력 
    - 변수의 값이 null이면 화면에 null이 출력됨
      - null인지를 check한 후 nul이면 아무것도 없는 문자열 출력 등 
      - 불편한 과정을 거쳐야 함
    - EL을 사용하면 좀 더 편리하게 변수를 JSP에서 사용 가능
    
  - EL, isELIgnored
  
  - 표현 언어(Expression Language)
  
    - 값을 표현하는 데 사용되는 Script 언어 
    - JSP의 기본 문법을 보완하는 역할을 함
      - JSP - 자바 & HTML 등 프론트에서 공부했던 요소들이 많이 들어감
      - 어떻게 하면 JSP를 효율적으로 가능?
    - 직관적, 이질감이 들지 않는 것을 활용 목적
    - JSP를 디자이너가 보았을 때도 괜찮지 않는가?
    - 제공 기능
      - JSP의 스코프(scope)에 맞는 속성 사용
      - 집합 객체에 대한 접근 방법 제공
        - Collection, Framework에서 제공하는 객체
      - 수치, 관계, 논리 연산자 제공
      - 자바 클래스 메소드 호출 기능 제공
      - 표현언어만의 기본 객체 제공
  
  - 표현 언어 - 표현 방법
  
    - `${expr}`
  
      - 표현언어가 정의한 문법에 따라 값을 표현하는 식
  
      ```jsp
      <jsp:include page="/module/${skin.id}/header.jsp" flush="true" />
      <b>${sessionScope.member.id}</b>님 환영합니다.
      ```
  
    - JSTL 같은 코드 내, 각종 태그 안에서, 텍스트 출력 부분에서도 사용이 가능함
  
    - 표현언어 
  
      - JSP의 스크립트 요소(스크립트릿, 표현식, 선언부)를 제외한 나머지 부분에서 사용될 수 있음
      - 표현식을  통해서 표현식보다 편리하게 값을 출력 가능
      
    - EL에서 사용할 수 있는 객체
    
    - ![2_6_1__](.\2_6_1__.png)
      - 어플리케이션, 세션, 리퀘슽트, 페이지 이런 스코프와 관련된 객체들
      - 파라미터, 쿠키, 헤더, 초기화 파라미터들을 읽어들이기 위한 객체들도 제공
    
    - ex)
    
      - ![2_6_1____](.\2_6_1____.png)
      - pageContext, request가 가지고 있는 메서드를 이용해 출력해야 하는 부분을 EL로 쓰고 있음
      - JSP - 결과를  출력할 떄만 주로 사용함
        - EL에 익숙해지면 Java코드 쓰는 것보다 깔끔하게 JSP 파일 작성 가능
      
    - 데이터 타입 
    
      - EL : 다양한 데이터를 다룰 수 있음
      - 불리언 타입 - true와 false
      - 정수타입 - 0~9로 이루어진 정수 값 음수의 경우 '-'가 붙음
      - 실수타입 - 0~9로 이루어져 있으며, 소수점('.')을 사용할 수 있고, 3.24e3과 같이 지수형으로 표현 가능함
      - 문자열 타입 - 따옴표(' 또는 ")로 둘러싼 문자열 
        - 만약 작은 따옴표를 사용해서 표현할 경우 
        - 값에 포함된 작은 따옴표는 `\'`와 같이 \ 기호와 함께 사용해야 함
        - \ 기호 자체는 `\\`로 표시함
      - 널 타입 - null
    
    - 객체 접근 규칙
    
      - `${<표현1>.<표현2>}`
      - 표현1, 표현2가 무엇이 있느냐에 따라 의미가 변화
        - 표현1이나 표현 2가 null이면 null을 반환함
        - 표현1이 Map인 경우, 표현 2가 Key로한 값을 반환
        - 표현1이 List or 배열이면 표현2가 정수일 경우
          - 해당 정수번째 index에 해당하는 값을 반환
          - 정수가 아닐 경우에는 오류가 발생함
        - 표현1이 객체일 경우 표현 2에 해당하는 getter 메소드에 해당하는 메소드를 호출한 결과를 반환
          - ex) Student라는 객체가 있었을 때, 이 Student 객체에 인스턴스를 가리키는 레퍼런스 변수가 Student
          - Studnent.name이라고 문법이 만들어져 있었을 때는
          - 레퍼런스 변수가 가리키고 있는 이 Student가 가리키는 객체의 getName이라는 메서드를 실행시킴
          - 이 getName이 리턴해주는 name값을 반환시켜줌
    
    - 수치 연산자
    
      - `+`: 덧셈, `-`: 뺄셈, `*`: 곱셈, `/ or div`: 나눗셈, `% or mod` : 나머지
      - 가끔 HTML 태그 등 /, %가 예약어로 잡혀있는 경우 존재
        - div, mod 이런것들을 이용하면 사용할 수 있음 
      - 숫자가 아닌 객체와 수치 연산자를 사용할 경우
        - 객체를 숫자 값으로 변환 후 연산자를 수행
        - ex) ${"10"+1} -> ${10+1}
      - 숫자로 변환할 수 없는 객체와 수치 연산자를 함께 사용하면 에러를 발생
        - ex) ${"열"+ 1} -> 에러
      - 수치 연산자에서 사용되는 객체가 null이면 0으로 처리
        - ${null + 1} => ${0+1}
    
    - 비교 연산자
    
      - == or eq, != or ne, < or lt, > or gt, <= or le, >= or ge
      - 문자열 비교
        - ${str == '값'} str.compareTo("값") == 0과 동일
      - HTML 태그랑 혼용해서 사용하기 때문에 영문자로 바꾸어서 사용해야 한다!
    
    - 논리연산자
    
      - and, or, not
    
    - empty 연산자, 비교선택 연산자
    
      - empty - null이거나 빈 문자열일 경우 처리 가능한 empty라는 키워드가 존재
      - ![2_6_1_empty_,__](.\2_6_1_empty_,__.png)
      
    - 연산자 우선순위 - 다른 언어와 다르지 않음
    
      - 이 순서대로 우선 순위가 정해짐
      - [] .
      - ()
      - \- (단일) not ! empty
      - \* / div % mod
      - \+ -
      - < > <= >= lt gt le ge
      - == != eq ne
      - && and
      - || or
      - ? :
    
    - 표현 언어 비활성화 : JSP에 명시하기 
    
      - 기본은 false임, true로 변경해서 사용하면 됨
      - `<$@ page isELIgnored="true" %>`
      - ![2_6_1___](.\2_6_1___.png)
    
  - 실습
  
    - 각각 스코프에 이 setAttribute에 저장되어 있는 이름 해당 영역이 겹쳐서 사용이 됐을 때엔 명확하게 해주자!
      - `${p1}`: 만 해도 출력이 됨. => 간략하게 표현 가능
    - 만약 변수들이 겹쳤다 => 작은 스코프부터 찾음
      - 가급적이면 가독성 좋게 사용하려면 명시적으로 이 scope이 가지고 있는 값을 주세요가 
        - 더 효율적!
    - 사칙 연산 시, `/` 같은 경우에는 제대로 인식을 못할 수 있어
      - `div`라는 예약어를 이용해주면 good
    - `<%@ page isELIgnored="true">`
      - EL이 다 무시되고 그냥 문자처럼 출력이 되고 있는 것을 볼 수 있음
  
- **JSTL(JSP Standard Tag Library)**

  - FrontEnd 개발자가 JSP를 수정 시, JSP 안에 자바코드와 HTML 코드가 섞여 있다면?
    - 수정할 때 굉장히 어려움을 느끼게 됨
    - JSPL의 등장
  - JSPL - 태그형식으로 조건문, 반복문 등을 사용 가능
    
    - EL과 연동하면 더욱 강력
  - JSTL, core tag
    - JSTL
      - JSP 페이지에서 조건문 처리, 반복문 처리 등을 HTML tag 형태로 작성할 수 있게 도와줌
      - ![2_6_2_jstl](.\2_6_2_jstl.png)
      - JSP
        - 스크립트릿의 자바 코드 & HTML 태그가 섞여 있는 형태로 초창기에 개발됨
        - 개발의 편의성은 good, 문제는 HTML 태그와 자바 코드가 섞여있어서 해당 코드 수정하기 힘듬
          - 유지 보수가 어려움
      
    - JSTL을 사용하려면??
      - `http://tomcat.apache.org/download-taglibs.cgi`
      - 3가지 jar 파일을 다운로드 하고 WEB-INF/lib/ 폴더에 복사를 함
      - ![2_6_2_jstl_](.\2_6_2_jstl_.png)
      
    - JSTL이 제공하는 태그의 종류
      - ![2_6_2_jstl___](.\2_6_2_jstl___.png)
      - 코어 - 조건문, 반복문 등을 처리할 때 사용이 됨
      - ![2_6_2_jstl_ (1)](.\2_6_2_jstl_ (1).png)
      - 논리적인 흐름을 태그로 처리할 수 있도록 도와줌
      - import 같은 태그 부분들은 어떤 URL에 있는 내용을 읽어오거나 출력하는 기능도 포함!
      
    - 코어 태그 : 변수 지원 태그 - set, remove
      - ![1](.\1.png)
      - JSTL이 제공하는 set 태그 
        - JSP에서 4가지 스코프에다가 값을 저장 가능
        - scope 부분에 뭐라 지정하느냐에 따라 해당하는 객체에 값이 저장됨
      
    - 주의! JSTL을 쓰기 위해선 라이브버리를 다운 & 이클립스에 넣어주는 것!
      - 그리고 JSP 파일에 알려주어야 함
      - `<%@ taglib prefix="c"%>`
        - 지시자에 taglib라는 지시자 존재
        - prefix="c"로 지정하면 됨
          - prefix?
            - 실제로 이런 태그들을 쓰는데 태그들이 중복될 수 있음
          - JSTL : 커스텀 태그로 만들어서 사용가능
            - 우리가 태그를 작성할 수 있어
            - 이 태그가 누가 가진 거지 알 수 없기 때문에
            - prefix를 지정해 사용할 때 쓸 수 있게 도와줌
      - `<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>`
        - uri : 여기서 지정한 태그를 쓸거야하고 넣어줌
        - 이제서야 이용 가능
      
    - 이클립스에 있는 파일들 
      - 파일 탐색기에서 파일을 막 삭제하거나 그러면 X
      - 파일에 대한 정보 등을 가지고 있기 때문에 잘 인식 못할 수도 있어
      
    - `<c:remove var="value1" scope="request" />`
      
      - 태그들 사용할 때 단일 태그로 사용 가능 - 중간에 값이 없을 때 => 닫아주면 깔끔하게 사용 가능
      
    - 코어 태그 : 변수 지원 태그 - 프로퍼티, 맵의 처리
      - ![2](.\2.png)
      - some 객체가 자바빈인 경우
        - 이 프로퍼티 이름, 필드 명하고 똑같이 나옴 
          - 실제 필드 명과 같은 setter 메서드를 가지고 있을 것
          - setter 메소드는 항상 규칙을 지켜서 제작
            - 앞에다 set이라고 쓰고, 이 필드의 첫 글자를 대문자로 바꾸어서 사용해야 하는 규칙
          - setPropertyName이라고 전혀 호출하지 않지만, 실제로 코드가 수행될 때는 
            - 해당 메서드, setPropertyName이 호출됨
            - 이 때, setter 메소드 구현 시 필드의 첫 글자를 대문자로 바꾸지 않았다든가, 
              - 이런 규칙들을 지켜주지 않으면 이 메서드는 호출이 될 수가 없음
          - getter, setter라는 것들의 문법을 지켜주어야 함
        - set 태그를 이용해 만들면, 클래스 사용할 때 some이라는 객체가 가진 setPropertName에다가 해당 값을 넣어주자
      - some 객체가 map이라면
        - map이 가지고 있는 put이라는 메서드가 실행이 될 것
        - put 메서드에 첫 번째 parameter로 propertyName, 값으로는 value에 지정된 anyValue가 지정되어서 실행이 됨
      - 자바 빈 or 맵 같은 객체에다 실제로 값을 넣어주는 부분도 사용가능 
      - 변수 지원 태그를 이용해서 프로퍼티 or 맵을 처리할 수 있음
      - 객체에 property가 나오면, 이 객체의 값을 변경 or 값을 읽어들이기 위한 getter, setter 메서드를 생각하면 됨
      - set 태그를 이용해서 특정한 객체의 메서드에 값을 전달할 수도 있음
      
    - 코어 태그 : 흐름제어 태그
      - ![3](.\3.png)
      - 자바와 if와는 조금 다르게 else에 대한 처리는 없음
        - if의 test 이 안에서는 보통 EL 표기법이 나옴
      - 사용하는 문법은 prefix가 c라고 지정되어 있으니
        - c:if 이용하자
        - 이러한 if 태그에 test라는 속성을 부여할 수 있음
        - 여기에 조건을 줘서 실행을 하면 됨
      - test 속성의 값에 조건문을 주어서 해당 조건이 만족이 될 때만 실행을 하게 하는 구문
        - 아래의 이 두개는 같은 코드
      
      ```jsp
      <%
      	request.setAttribute("n", 10);
      %>
      <c:set var="n" scope="request" value=10 />
      ```
      
    - 코어 태그 - 흐름제어 태그 - choose
    
      - ![2_6_2__choose](.\2_6_2__choose.png)
      - 구문을 보면 choose, when, otherwise 이런식으로 사용할 수 있음
        - if-else 구문과 유사하다고 볼 수 있겠는데
      - when이 여러 개 나올 수 있음
        - when test에 조건을 EL 구문으로 주면 됨
        - 각각의 when 조건에서 만족하지 못한다면, 맨 마지막에 otherwise 구문이 실행이 되게 됨
      
    - 코어 태그 - 흐름제어 태그 - forEach
    
      - ![2_6_2__forEach](.\2_6_2__forEach.png)
      
      - forEach - 배열이나 list 같은 자료구조에서 정보를 하나씩 하나씩 뽑아내올 수 있음
      
        - 마치 for문 처럼 특정 조건만큼만 반복을 하게도 만들 수 있음
        - 대괄호로 되어있는 것들은 생략이 가능하다!
        - begin, end가 없으면 처음부터 끝까지 다 출력을 하게 됨
        - begin, end 같은 속성을 잘 이용하면 원하는 조건에 맞추어 원하는 값만 출력 가능
      
      - 리스트 생성 시, JSP가 자바 => 반드시 import라는 구문이 필요함, 그냥 리스트 쓰면 뭐일지 모르니까
      
        - 자동 완성을 이용해서 `<%@page import="java.util.List"%>`를 얻어오자
        - 자바이기 때문에 반드시 자기 패키지 아닌 클래스를 사용할 떄는 import 구문이 있어야 된다
      
    - 코어 태그 : 흐름제어 태그 - import
      
      - ![2_6_2__import](.\2_6_2__import.png)
      
      - 특정한 url 페이지의 결과를 읽어들여 
        
        - 그 결과를 변수에 저장한 다음에 사용하는 것
        
      - url : 실제 내가 읽어들여오고 싶은 url을 사용하면 됨
        
        - 결과가 나오는 페이지의 url을 가져오자
        
      - charEncoding : 필수는 아님, 읽어올 때 utf-8 or euc-kr로 읽어온다고 지정 가능
      
      - 페이지의 값을 읽어들여 그 값을 변수에 넣고 실제 출력하는 것을 할 수 있음
      
      - 중요!
        - 얼마든지 검색엔진이나 이런 부분에서 값을 넣은 값을 나는 찾아서 읽어오고 싶다면?
        - param같은 태그를 이용해서 사용하면 조금 더 디테일하게 가져올 수 있음
      
    - 코어 태그 : 흐름제어 태그 - redirect
      
      - ![2_6_2__redirect](.\2_6_2__redirect.png)
      
      - redirect하려면, response.sendRedirect() 했었던 것처럼 유사하게 실행이 됨
      - redirect 태그 안에 url 속성에다 실제 redirect 하고자 하는 url을 넣어주면 됨
      - param 태그 안에는 redirect하면서 페이지에 전달할 값이 존재한다면 
        
        - 그 떄 파라미터 이름, 파라미터 값을 넣어서 지정할 수 있도록 이렇게 넣어주는 부분도 존재
      - 리다이렉트만 하는 것
        - html 코드는 필요 없고 쓰이지도 않음
    
    - 코어 태그 : 기타 태그 - out
    
      - ![2_6_2__out](.\2_6_2__out.png)
      - out 태그 - 특정한 문자열을 출력할 수 있어
      - value 속성 - 실제로 이 JspWrter에 출력할 값을 나타냄
        - 일반적으로 String과 같은 문자열이 들어옴
      - escapeXml - 값이 true일 때는 문자가 변환이 됨
        - 자체가 태그로 인식하지 않고 문자 자체가 인식이 되더라하고 기억하자!
      - 만약 value 값이 java.io.Reader의 한 종류라면
        - out 태그는 reader로부터 데이터를 읽어와서
        - JspWriter에다가 값을 출력하게 됨
      
      ```jsp
      <c:set var="t" value="<script type='text/javascript'>alert(1);</script>"/>
      ```
      
      - t라는 변수에 javascript 태그 값을 넣어둠
      - 실제 이외에도 다양한 태그가 존재
      - 커스텀 태그
        - 사용자도 얼마든지 내가 자주 쓰는 코드라던가 이런것들을 내가 원하는 대로 태그로 만들어서 사용할 수도 있어
      - 자바 코드가 그냥 보여지는 것보단, html이랑 더 잘 어우러짐
      - JSP 파일 자체에 자바 코드가 막 노출되는 것이 좋지 않더라!
        - EL & JSTL을 더 잘 사용하면 더 좋은 페이지를 만들어낼 수 있겠음
      - 

